"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[523],{98082:function(e,n,t){var r=t(29439),i=t(67294),c=t(31808);n.Z=function(){var e=i.useState(!1),n=(0,r.Z)(e,2),t=n[0],a=n[1];return i.useEffect((function(){a((0,c.fk)())}),[]),t}},31808:function(e,n,t){t.d(n,{fk:function(){return a},jD:function(){return c}});var r,i=t(98924),c=function(){return(0,i.Z)()&&window.document.documentElement},a=function(){if(!c())return!1;if(void 0!==r)return r;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),r=1===e.scrollHeight,document.body.removeChild(e),r}},19650:function(e,n,t){t.d(n,{u:function(){return f},Z:function(){return h}});var r=t(87462),i=t(4942),c=t(29439),a=t(94184),o=t.n(a),l=t(50344),s=t(67294),u=t(53124),d=t(98082);function p(e){var n=e.className,t=e.direction,c=e.index,a=e.marginDirection,o=e.children,l=e.split,u=e.wrap,d=s.useContext(f),p=d.horizontalSize,v=d.verticalSize,m=d.latestIndex,h={};return d.supportFlexGap||("vertical"===t?c<m&&(h={marginBottom:p/(l?2:1)}):h=(0,r.Z)((0,r.Z)({},c<m&&(0,i.Z)({},a,p/(l?2:1))),u&&{paddingBottom:v})),null==o?null:s.createElement(s.Fragment,null,s.createElement("div",{className:n,style:h},o),c<m&&l&&s.createElement("span",{className:"".concat(n,"-split"),style:h},l))}var v=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t},f=s.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),m={small:8,middle:16,large:24};var h=function(e){var n,t=s.useContext(u.E_),a=t.getPrefixCls,h=t.space,g=t.direction,x=e.size,y=void 0===x?(null==h?void 0:h.size)||"small":x,w=e.align,Z=e.className,k=e.children,j=e.direction,E=void 0===j?"horizontal":j,b=e.prefixCls,C=e.split,z=e.style,S=e.wrap,D=void 0!==S&&S,O=v(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),R=(0,d.Z)(),G=s.useMemo((function(){return(Array.isArray(y)?y:[y,y]).map((function(e){return function(e){return"string"==typeof e?m[e]:e||0}(e)}))}),[y]),I=(0,c.Z)(G,2),M=I[0],N=I[1],U=(0,l.Z)(k,{keepEmpty:!0}),B=void 0===w&&"horizontal"===E?"center":w,L=a("space",b),P=o()(L,"".concat(L,"-").concat(E),(n={},(0,i.Z)(n,"".concat(L,"-rtl"),"rtl"===g),(0,i.Z)(n,"".concat(L,"-align-").concat(B),B),n),Z),F="".concat(L,"-item"),T="rtl"===g?"marginLeft":"marginRight",_=0,A=U.map((function(e,n){null!=e&&(_=n);var t=e&&e.key||"".concat(F,"-").concat(n);return s.createElement(p,{className:F,key:t,direction:E,index:n,marginDirection:T,split:C,wrap:D},e)})),H=s.useMemo((function(){return{horizontalSize:M,verticalSize:N,latestIndex:_,supportFlexGap:R}}),[M,N,_,R]);if(0===U.length)return null;var W={};return D&&(W.flexWrap="wrap",R||(W.marginBottom=-N)),R&&(W.columnGap=M,W.rowGap=N),s.createElement("div",(0,r.Z)({className:P,style:(0,r.Z)((0,r.Z)({},W),z)},O),s.createElement(f.Provider,{value:H},A))}},88523:function(e,n,t){t.r(n),t.d(n,{default:function(){return m}});var r=t(93433),i=t(15861),c=t(29439),a=t(64687),o=t.n(a),l=t(19650),s=t(71577),u=t(67294),d="src-pages-web-rtc-index-module_kmT-F",p=t(94880),v=t(85893),f="localVideo",m=function(){var e=(0,u.useState)([]),n=(0,c.Z)(e,2),t=n[0],a=n[1],m=(0,u.useRef)([]);(0,u.useEffect)((function(){var e,n,t,r=(e=["vp9","vp9.0","vp8","vp8.0","avcl","av1","h265","h264"],n=[],t=MediaRecorder.isTypeSupported,["webm","mp4","mov","avi","wmv","flv","mkv"].forEach((function(r){var i="".concat("video","/").concat(r);e.forEach((function(e){["".concat(i,";codecs=").concat(e),"".concat(i,";codecs=").concat(e.toUpperCase())].forEach((function(e){t(e)&&n.push(e)}))})),t(i)&&n.push(i)})),n);console.log({supportedMineTypes:r})}),[]);var h=function(){var e=(0,i.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia(n);case 2:t=e.sent,g(t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(e){document.getElementById(f).srcObject=e},x=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)(o().mark((function e(){var n,t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 1024,1048576,n={mimeType:"video/webm"},e.next=5,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 5:t=e.sent,console.log({stream:t}),(r=new MediaRecorder(t,n)).start(0),r.ondataavailable=function(e){m.current.push(e.data)},r.onstop=function(){console.log("stop recording..")},r.onerror=function(e){console.log("recording eroror..",{e:e})};case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getDisplayMedia({audio:!1,video:!0});case 2:n=e.sent,g(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{children:"this is webRTC"}),(0,v.jsx)("div",{children:(0,v.jsxs)(l.Z,{children:[(0,v.jsx)(s.Z,{onClick:function(){h({audio:!1,video:!0})},children:"Get Stream"}),(0,v.jsx)(s.Z,{onClick:function(){var e=document.getElementById(f),n=document.createElement("canvas");n.width=e.videoWidth,n.height=e.videoHeight;var t=n.getContext("2d");null==t||t.drawImage(e,0,0,n.width,n.height);var i=n.toDataURL("image/png");a((function(e){return[].concat((0,r.Z)(e),[{id:(0,p.Ki)(),url:i}])}))},children:"take photos"}),(0,v.jsx)(s.Z,{onClick:x,children:"Get all Devices"}),(0,v.jsx)(s.Z,{onClick:w,children:"shareScreen"}),(0,v.jsx)(s.Z,{onClick:y,children:"recording.."}),(0,v.jsx)(s.Z,{onClick:function(){var e=new Blob(m.current,{type:"video/webm"}),n=URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download=n,t.click(),URL.revokeObjectURL(n)},children:"下载"})]})}),(0,v.jsx)("div",{children:(0,v.jsx)("video",{id:f,autoPlay:!0,playsInline:!0,muted:!0})}),(0,v.jsx)("div",{children:(0,v.jsx)(l.Z,{children:t.map((function(e){return(0,v.jsx)("img",{src:e.url,className:d},e.id)}))})})]})}}}]);